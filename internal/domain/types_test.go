package domain

import (
	"testing"

	"github.com/stretchr/testify/require"
)

func TestVersionParsing(t *testing.T) {
	tests := []struct {
		raw   string
		major int
		minor int
		patch int
		label string
	}{
		{"1.2.3", 1, 2, 3, ""},
		{"1.2", 1, 2, 0, ""},
		{"1", 1, 0, 0, ""},
		{"v1.2.3", 1, 2, 3, ""},
		{"v1", 1, 0, 0, ""},
		{"v1.2.3-alpha", 1, 2, 3, "alpha"},
		{"v1.2.3alpha", 1, 2, 3, "alpha"},
		{"vers10.20.30alpha", 10, 20, 30, "alpha"},
	}

	for _, test := range tests {
		t.Run(test.raw, func(t *testing.T) {
			r := require.New(t)
			version := ParseVersion(test.raw)
			r.Equal(SemVer{test.major, test.minor, test.patch, test.label}, version)
		})
	}

}
